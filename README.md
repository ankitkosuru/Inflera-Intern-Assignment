                                                                # Inflera-Intern-Assignment
## Overview

This project implements a multi-agent Q&A system with a routing layer that decides which specialized agent should handle a user’s query. The system integrates:

1)RAG Agent: Retrieval-Augmented Generation over domain text files (Amazon Echo Dot in this case).

2)Calculator Agent: Handles numeric and computational queries using numexpr.

3)Dictionary Agent: Provides word definitions using the Free Dictionary API.

4)A Gradio UI wraps everything, enabling interactive testing in a single notebook.

## Architecture

The system follows a multi-agent design with a central router that dispatches user queries to the most appropriate agent:

### Router

Acts as the entry point for all user queries.

Uses simple heuristics and keyword matching to decide which agent should handle a query.

If a query is clearly numeric or definitional, it routes to Calculator Agent or Dictionary Agent. Otherwise, it defaults to RAG Agent.

A secondary check ensures that numeric-looking queries mistakenly sent to RAG are redirected to Calculator.

### RAG Agent

Loads and processes six domain text files.

Splits text into smaller chunks using a recursive character splitter.

Generates dense embeddings with all-MiniLM-L6-v2.

Stores embeddings in a FAISS vector database for similarity search.

On query, retrieves the top-k most relevant chunks.

Passes context + query to FLAN-T5-base, which generates a grounded answer.

Guardrails ensure the model responds with “Not found in the uploaded files” if no relevant context is retrieved.

### Calculator Agent

Identifies and evaluates numeric expressions using numexpr.
Handles comparisons (highest/lowest), percentages, and month-based aggregations from uploaded sales statistics.
Ensures queries requiring calculations are resolved without invoking the LLM.

### Dictionary Agent

Uses the Free dictionary API to return definitions.
Can handle single terms or comma-separated multiple terms.
Ensures concise, direct answers for definitional queries.

### User Interface (UI)

Built with Gradio Blocks.

Provides a simple input box for user queries.
Displays three outputs:
  
  1)The chosen branch/agent (Calculator, Dictionary, RAG).
  
  2)The retrieved context snippets (for transparency).
  
  3)The final answer.
Wrapped in a timeout (150 seconds) to avoid freezing on long operations.

      
### Core Flow

1)RAG path: Uploaded .txt files → split into chunks → embedded with all-MiniLM-L6-v2 → indexed in FAISS → top-k retrieval → answer generated by FLAN-T5.

2)Calculator path: Numeric expressions or month-wise comparisons resolved with numexpr.

3)Dictionary path: Definitions fetched via API.

4)Router: Keyword-based heuristics decide which agent is called.


## Key Design Choices
1)Dense retrieval with FAISS over sparse (BM25) → better handling of paraphrased queries.

2)MiniLM embeddings → lightweight and efficient.

3)FLAN-T5-base → deterministic, stable outputs for consistent evaluation.

4)Heuristic router → predictable behavior and easy debugging.

5)Guardrails → if no relevant context is retrieved, the system responds with “Not found in the uploaded files” rather than hallucinating.

6)Calculator/Dictionary overrides → specialized agents improve accuracy for numeric and definition queries.

7)Timeouts → prevent long LLM calls from freezing the UI.

## How to Run
### Google Colab

Open the notebook Inflerno_Intern_Assignment.ipynb in Google Colab.
Run cells in order:
1)Install dependencies

2)Upload six .txt files (Amazon files)

3)Ingest & build FAISS index

4)Load FLAN-T5 model

5)Define agents & router

6)Launch Gradio UI

### Test with queries:

“What are the available colors for Echo Dot?” → RAG

“Define latency, inference” → Dictionary

“Calculate total sales of Echo Dot” → Calculator

## Router Keywords
### Dictionary Agent

Triggered when query contains: define, meaning of

Example:
“Define inference and latency” → Dictionary Agent

### Calculator Agent
Triggered when query has numeric or aggregation cues:

Words like : calculate, average, mean

Numbers with operators (+, -, %, increase, decrease)

comparative terms like highest, lowest, maximum, minimum

Example:
"Calculate total Sales of Echo Dot" - Calculator Agent


## Example Queries

1) What payment methods are Accepted by Amazon?

2) Define Counterfeit

3) In which month Echo Dot has highest sales?


## License & Credits
Embeddings: sentence-transformers/all-MiniLM-L6-v2
LLM: google/flan-t5-base
Dictionary API: Free Dictionary API






